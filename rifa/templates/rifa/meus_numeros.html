{% extends 'rifa/base.html' %}

{% block title %}Meus NÃºmeros{% endblock %}

{% block content %}
<section class="d-flex justify-content-center align-items-center" style="min-height: 80vh;" data-aos="fade-up">
  <div class="glass-login w-100" style="max-width: 500px;">
    <h3 class="mb-3 text-center"><span style="font-size:1.3em;">ðŸ”Ž</span> Buscar Pedidos</h3>
    <form id="buscar-form" autocomplete="off">
      <div class="d-flex justify-content-center gap-4 mb-3">
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="tipoBusca" id="radioTelefone" value="telefone" checked>
          <label class="form-check-label" for="radioTelefone">Telefone</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="tipoBusca" id="radioCPF" value="cpf">
          <label class="form-check-label" for="radioCPF">CPF</label>
        </div>
      </div>
      <div id="campo-telefone" class="mb-3">
        <label for="inputBusca" class="form-label">Digite seu Telefone</label>
        <input type="text" class="form-control" id="inputBusca" name="telefone" placeholder="(99) 99999-9999">
      </div>
      <div id="campo-cpf" class="mb-3" style="display:none;">
        <label for="inputCPF" class="form-label">Digite seu CPF</label>
        <input type="text" class="form-control" id="inputCPF" name="cpf" placeholder="000.000.000-00">
      </div>
      <button type="submit" class="btn btn-primary w-100">Buscar</button>
    </form>
    <div id="resultados" class="mt-4"></div>
  </div>
</section>

<script>
document.getElementById('buscar-form').addEventListener('submit', function(e) {
  e.preventDefault();
  const tipo = document.querySelector('input[name="tipoBusca"]:checked').value;
  const telefone = document.getElementById('inputBusca').value.trim();
  const cpf = document.getElementById('inputCPF').value.trim();
  let busca = '';
  if (tipo === 'telefone' && telefone) {
    busca = `Buscando nÃºmeros vinculados ao telefone <b>${telefone}</b>...`;
  } else if (tipo === 'cpf' && cpf) {
    busca = `Buscando nÃºmeros vinculados ao CPF <b>${cpf}</b>...`;
  } else {
    busca = 'Preencha o campo corretamente para buscar.';
  }
  document.getElementById('resultados').innerHTML = `<div class="alert alert-info mt-3">ðŸ”„ ${busca}</div>`;
});
</script>

<!-- MÃ¡scara de telefone e CPF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.8/inputmask.min.js"></script>
<script>
Inputmask({ mask: '(99) 99999-9999', showMaskOnHover: false }).mask('#inputBusca');
Inputmask({ mask: '999.999.999-99', showMaskOnHover: false }).mask('#inputCPF');

// Alternar campos conforme radio
document.getElementById('radioTelefone').onchange = function() {
  if (this.checked) {
    document.getElementById('campo-telefone').style.display = '';
    document.getElementById('campo-cpf').style.display = 'none';
  }
};
document.getElementById('radioCPF').onchange = function() {
  if (this.checked) {
    document.getElementById('campo-telefone').style.display = 'none';
    document.getElementById('campo-cpf').style.display = '';
  }
};
</script>
{% endblock %}
