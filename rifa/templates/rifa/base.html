{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <title>{% block title %}Pantanal da Sorte{% endblock %}</title>
  
  <!-- Favicons completos -->
  <link rel="icon" href="{% static 'img/favicon/favicon.ico' %}" type="image/x-icon">
  <link rel="shortcut icon" href="{% static 'img/favicon/favicon.ico' %}" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'img/favicon/favicon-16x16.png' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'img/favicon/favicon-32x32.png' %}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/favicon/apple-touch-icon.png' %}">
  <link rel="icon" type="image/png" sizes="192x192" href="{% static 'img/favicon/android-chrome-192x192.png' %}">
  <link rel="icon" type="image/png" sizes="512x512" href="{% static 'img/favicon/android-chrome-512x512.png' %}">
  
  <!-- Meta tags para PWA (opcional) -->
  <meta name="theme-color" content="#ffd700">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="msapplication-TileImage" content="{% static 'img/favicon/android-chrome-192x192.png' %}">

  <!-- Fonts e √≠cones -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- AOS (Anima√ß√µes ao rolar) -->
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">

  <!-- CSS modularizado -->
  <link rel="stylesheet" href="{% static 'css/base/variables.css' %}">
  <link rel="stylesheet" href="{% static 'css/base/reset.css' %}">
  <link rel="stylesheet" href="{% static 'css/layout/layout.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/glass.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/cards.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/forms.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/utilities.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/animations.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/text-overrides.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/steps.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/gold-theme.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/custom-logo.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/payment.css' %}">
  
  {% block extra_css %}{% endblock %}
  <style>
    /* Acessibilidade & mobile performance */
    :root { --tap-target:44px; }
    button, .btn { min-height: var(--tap-target); }
    @media (max-width:576px){
      h1,h2,h3{line-height:1.2;}
      .conteudo-centralizado{padding-top:1.2rem!important;}
    }
    /* Reduz movimentos para usu√°rios que preferem menos anima√ß√£o */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important;transition:none!important;}
    }
    /* Evita zoom autom√°tico em iOS ao focar inputs (mantendo font >=16px) */
    input,select,textarea{font-size:16px;}
    /* Suaviza rolagem */
    html{scroll-behavior:smooth;}
    /* Remove highlight azul no mobile */
    *{-webkit-tap-highlight-color:transparent;}
  </style>
</head>
<body class="layout-root">
  <!-- Fundo com gradiente -->
  <div class="bg-gradiente"></div>

  <header class="navbar-custom">
    <button class="menu-toggle" id="btn-menu" type="button" aria-label="Abrir menu" 
      style="background:transparent;border:none;color:var(--accent-gold);appearance:none;-webkit-appearance:none;padding:8px;">
      <span style="pointer-events:auto;color:var(--accent-gold);font-size:28px;line-height:1;">‚ò∞</span>
    </button>
    <a href="/" class="logo" aria-label="Pantanal da Sorte">
      <span class="logo-text blink">Pantanal da Sorte</span>
    </a>
    <div class="cart-section" onclick="window.location.href='{% url 'meus_numeros' %}'">
      <i class="fas fa-shopping-cart"></i>
    </div>
  </header>

  <!-- Menu lateral -->
  <nav id="menu-lateral" class="menu-lateral">
    <ul style="display: flex; flex-direction: column; gap: 10px;">
      <li><a href="{% url 'home' %}">üè† In√≠cio</a></li>
      <li><a href="{% url 'sorteios' %}">üêä Sorteios</a></li>
      <li><a href="{% url 'meus_numeros' %}">üçÄ Meus n√∫meros</a></li>
      <li><a href="{% url 'ganhadores' %}">üèÜ Ganhadores</a></li>
      {% if not user.is_authenticated %}
        <!-- Bot√µes Entrar e Cadastrar juntos -->
        <li style="margin-top: 15px;">
          <div style="display: flex; gap: 8px; flex-direction: column;">
            <a href="{% url 'login' %}" class="btn btn-primary d-flex align-items-center justify-content-center">
              <i class="fas fa-sign-in-alt me-2"></i> Entrar
            </a>
            <a href="{% url 'cadastro' %}" class="btn btn-warning d-flex align-items-center justify-content-center">
              <i class="fas fa-user-plus me-2"></i> Cadastrar
            </a>
          </div>
        </li>
      {% else %}
        <li style="margin-top: 15px;">
          <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger d-flex align-items-center justify-content-center w-100"><i class="fas fa-sign-out-alt me-2"></i> Sair</button>
          </form>
        </li>
      {% endif %}
    </ul>
    <button id="btn-fechar-menu" class="btn btn-link mt-3">Fechar</button>
  </nav>

  <!-- Modal login -->
  <div id="loginModal" class="modal-backdrop glass">
    <div class="modal-container">
      <button class="close-modal" onclick="fecharModal()">√ó</button>
      <h3 class="mb-3 text-center">Login</h3>
      <form method="POST" action="{% url 'login' %}">
        {% csrf_token %}
        <input type="text" name="username" class="form-control mb-2" placeholder="Telefone ou usu√°rio" required>
        <input type="password" name="password" class="form-control mb-2" placeholder="Senha" required>
        <div class="mb-2 text-end">
          <a href="{% url 'password_reset' %}" class="small">Esqueci minha senha</a>
        </div>
        <button type="submit" class="btn btn-primary w-100 mb-2">Continuar</button>
      </form>
      <a href="{% url 'cadastro' %}" class="btn btn-link w-100">Criar conta</a>
    </div>
  </div>

  <main class="conteudo-centralizado py-4 flex-fill">
    {% block content %}{% endblock %}
  </main>
  {% block footer %}
  <footer class="site-footer mt-auto">
    <div class="footer-inner text-center">
      <div class="footer-social mb-2">
        <a href="https://www.instagram.com/pantanaldasortems/" target="_blank" rel="noopener" aria-label="Instagram" class="footer-icon"><i class="fab fa-instagram"></i></a>
        <a href="https://wa.me/67996035358" target="_blank" rel="noopener" aria-label="WhatsApp" class="footer-icon"><i class="fab fa-whatsapp"></i></a>
      </div>
      <div class="footer-credits">Desenvolvido por <span class="dev-name">Gui Costa & Thaysa Rafaele</span></div>
      <div class="footer-copy small">&copy; 2025 ‚Äì Todos os direitos reservados</div>
    </div>
  </footer>
  {% endblock %}

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
  AOS.init();
  <!-- Menu e overlay: a l√≥gica de abrir/fechar e overlay √© gerida por static/js/main.js para evitar handlers duplicados -->
  </script>
  <script src="{% static 'js/main.js' %}"></script>
  <script src="{% static 'js/payment.js' %}"></script>
  <style>
    /* Sticky layout */
    .layout-root{min-height:100vh;display:flex;flex-direction:column;}
    .flex-fill{flex:1 0 auto;}
    .site-footer{background:rgba(0,0,0,.4);border-top:1px solid rgba(255,215,0,.25);padding:32px 16px 38px;margin-top:auto;position:relative;}
    .footer-inner{max-width:960px;margin:0 auto;}
    .footer-icon{display:inline-flex;align-items:center;justify-content:center;width:42px;height:42px;border:1px solid #1e4ed8;border-radius:12px;margin:0 6px;color:#1e7bf5;font-size:1.15rem;text-decoration:none;transition:.25s;background:rgba(30,64,175,.1)}
    .footer-icon:hover{background:#1e7bf5;color:#fff;box-shadow:0 0 14px -2px rgba(30,123,245,.8);}
    .footer-credits{font-size:.95rem;color:#e5e5e5;font-weight:500;margin-bottom:4px;}
    .dev-name{color:#4dff8c;font-weight:600;text-shadow:0 0 12px rgba(77,255,140,.55);animation:devGlow 2.5s ease-in-out infinite;}
    @keyframes devGlow{0%,100%{opacity:1;filter:drop-shadow(0 0 2px rgba(77,255,140,.4));}50%{opacity:.55;filter:drop-shadow(0 0 8px rgba(77,255,140,.9));}}
    .footer-copy{color:#bbb;margin-top:2px;}
    @media (max-width:576px){.footer-icon{width:38px;height:38px;margin:0 4px;border-radius:10px;}}
  </style>
  <style>
    /* Header / logo tweaks */
    .navbar-custom{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;position:relative;z-index:50}
    .navbar-custom .logo{display:inline-block;text-decoration:none;color:var(--accent-gold);font-family:'Poppins',sans-serif;font-weight:700}
    .logo-text{font-size:1.15rem;letter-spacing:0.4px;text-shadow:0 0 8px rgba(255,215,0,0.45);}
    @keyframes logoBlink{0%,100%{opacity:1}50%{opacity:.35}}
    .logo-text.blink{animation:logoBlink 1.25s linear infinite}
    @media (prefers-reduced-motion: reduce){.logo-text.blink{animation:none!important}}
    @media (max-width:576px){
      .navbar-custom{padding:8px 10px}
      .menu-toggle{position:relative;z-index:60}
      .navbar-custom .logo{position:absolute;left:50%;transform:translateX(-50%);top:8px}
      .navbar-custom .cart-section{position:relative;z-index:60}
      .logo-text{font-size:1rem}
    }
  </style>
</body>
</html>
