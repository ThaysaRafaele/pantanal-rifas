{% extends 'rifa/base.html' %}
{% load static %}

{% block title %}Inicio{% endblock %}

{% block content %}
  <!-- Hero full-bleed para SORTEIOS: substitua static/img/hero/sorteios-hero.png pelo arquivo final -->
  <section class="sorteios-hero-full">
    <div class="sorteios-hero-bg" style="background-image: url('{% static "img/hero/sorteios-hero.svg" %}');"></div>
    <div class="sorteios-hero-inner">
      <h1 class="hero-title">SORTEIOS</h1>
      <p class="hero-sub">Participe dos nossos sorteios e concorra a prÃªmios incrÃ­veis</p>
    </div>
  </section>

  <script>
    // Tenta carregar `arte.jpg` em static/img/hero/ e substitui o background do hero se existir
    (function(){
      const candidate = '{% static "img/hero/arte.jpg" %}';
      const img = new Image();
      img.onload = function(){
        const bg = document.querySelector('.sorteios-hero-bg');
        if(bg) bg.style.backgroundImage = `url('${candidate}')`;
      };
      img.onerror = function(){
        // tenta png padrao
        const fallback = '{% static "img/hero/sorteios-hero.png" %}';
        const img2 = new Image();
        img2.onload = function(){
          const bg = document.querySelector('.sorteios-hero-bg');
          if(bg) bg.style.backgroundImage = `url('${fallback}')`;
        };
        img2.onerror = function(){ /* fallback continua sendo o svg jÃ¡ definido */ };
        img2.src = fallback;
      };
      img.src = candidate;
    })();
  </script>

  <!-- Imagem de destaque para a seÃ§Ã£o PrÃªmios - substitua o arquivo em static/img/prizes/premios-hero.png -->
  <div class="prizes-hero fade-in" data-aos="fade-up">
    <img src="{% static 'img/prizes/premios-hero.svg' %}" alt="PrÃªmios - destaque" id="prizes-hero-image">
  </div>

  <script>
    // Substitui o src da imagem de prÃªmios por static/img/prizes/arte.jpg se o arquivo existir
    (function(){
      const target = document.getElementById('prizes-hero-image');
      if(!target) return;
      const candidate = '{% static "img/prizes/arte.jpg" %}';
      const img = new Image();
      img.onload = function(){ target.src = candidate; };
      img.onerror = function(){ /* mantÃ©m o svg atual */ };
      img.src = candidate;
    })();
  </script>

  <h2 class="fade-in text-glow" data-aos="fade-up">âš¡ PrÃªmios</h2>
  <div class="card-grid">
    {% for rifa in rifas %}
      <a href="{% url 'raffle-detail' rifa.id %}" style="text-decoration:none;color:inherit;" class="hover-raise">
        <div class="card fade-in-up clickable" data-aos="zoom-in" data-aos-delay="{{ forloop.counter0|add:1 }}00">
          {% if rifa.imagem %}
            <img src="{{ rifa.imagem.url }}" alt="{{ rifa.titulo }}" loading="lazy">
          {% endif %}
          <div class="card-content">
            <h3 class="raffle-title">{{ rifa.titulo|upper }}</h3>
            <p>{{ rifa.descricao }}</p>
            <span class="preco">POR APENAS R${{ rifa.preco|floatformat:2 }}</span>
            {% if rifa.encerrada %}
              <div class="badge-danger" style="margin-top: 10px;">Encerrada</div>
            {% else %}
              <div class="badge-success" style="margin-top: 10px;">DisponÃ­vel</div>
            {% endif %}
          </div>
        </div>
      </a>
    {% empty %}
      <div class="center" style="grid-column: 1 / -1; min-height: 200px;">
        <div class="glass" style="padding: 2rem; text-align: center;">
          <i class="fas fa-gift" style="font-size: 3rem; color: var(--raffle-title-color); margin-bottom: 1rem;"></i>
          <p>Nenhum prÃªmio cadastrado ainda.</p>
          <p class="text-muted">Volte em breve para conferir os novos sorteios!</p>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- SeÃ§Ã£o de Etapas do Sorteio -->
  <section class="etapas-sorteio">
    <div class="container">
      <h2 class="fade-in text-glow" data-aos="fade-up" style="text-align: center; margin-bottom: 3rem;">ðŸŽ¯ Como Participar</h2>
      <div class="steps-grid">
        <div class="step" data-aos="fade-up" data-aos-delay="100">
          <div class="step-icon">
            <i class="fas fa-search"></i>
          </div>
          <h3>ESCOLHA O SORTEIO</h3>
          <p>Escolha o sorteio que gostaria de concorrer, verifique a descriÃ§Ã£o e o regulamento. Em caso de dÃºvidas entre em contato com o administrador.</p>
        </div>
        <div class="step" data-aos="fade-up" data-aos-delay="200">
          <div class="step-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h3>SELECIONE SEUS BILHETES</h3>
          <p>VocÃª pode escolher quantos bilhetes desejar! Quanto mais bilhetes, mais chances de ganhar.</p>
        </div>
        <div class="step" data-aos="fade-up" data-aos-delay="300">
          <div class="step-icon">
            <i class="fas fa-money-bill-wave"></i>
          </div>
          <h3>FAÃ‡A O PAGAMENTO</h3>
          <p>FaÃ§a o pagamento no(s) mÃ©todo(s) de pagamento(s) disponÃ­veis no site.</p>
        </div>
        <div class="step" data-aos="fade-up" data-aos-delay="400">
          <div class="step-icon">
            <i class="fas fa-hourglass-half"></i>
          </div>
          <h3>AGUARDE O SORTEIO</h3>
          <p>Aguarde o resultado. Cruze os dedos! VocÃª pode ser o prÃ³ximo sorteado.</p>
        </div>
      </div>
    </div>
  </section>

  </section>
{% endblock %}

{% block footer %}
<footer class="site-footer mt-5">
  <div class="footer-inner">
    <div class="footer-social">
  <a href="https://www.instagram.com/pantanaldasortems/" target="_blank" aria-label="Instagram" class="social-link"><i class="fab fa-instagram"></i></a>
  <a href="https://wa.me/67996035358" target="_blank" aria-label="WhatsApp" class="social-link"><i class="fab fa-whatsapp"></i></a>
    </div>
    <div class="footer-dev">Desenvolvido por <span class="dev-badge dev-green">Gui Costa</span></div>
  <div class="footer-copy">&copy; {% now "Y" %} - Todos os direitos reservados</div>
  </div>
</footer>

<style>
  .site-footer{background:#111; padding:40px 15px 50px; border-top:1px solid rgba(255,215,0,.15); text-align:center; position:relative; overflow:hidden;}
  .site-footer:before, .site-footer:after{content:""; position:absolute; width:220px; height:220px; background:radial-gradient(circle at center,rgba(255,215,0,.18),rgba(255,215,0,0)); top:-60px; left:-40px; filter:blur(25px); opacity:.4;}
  .site-footer:after{top:auto; bottom:-70px; left:auto; right:-40px;}
  .footer-inner{max-width:900px;margin:0 auto; position:relative; z-index:2; font-family:'Poppins',sans-serif;}
  .footer-social{display:flex; justify-content:center; gap:34px; margin-bottom:18px;}
  .social-link{font-size:2rem; color:#2d7dff; display:flex; align-items:center; justify-content:center; transition:.35s; position:relative; text-decoration:none;}
  .social-link:hover{color:#6ca9ff; transform:translateY(-4px);} 
  .footer-dev{color:#ddd; font-size:.95rem; margin-bottom:8px; letter-spacing:.5px;}
  .dev-badge{display:inline-block; font-weight:600; position:relative;}
  .dev-green{color:#34d058; text-shadow:0 0 6px rgba(52,208,88,.8),0 0 14px rgba(52,208,88,.4); animation:greenPulse 1.2s ease-in-out infinite;}
  @keyframes greenPulse{0%{filter:brightness(1); text-shadow:0 0 4px rgba(52,208,88,.7),0 0 12px rgba(52,208,88,.35);}50%{filter:brightness(1.35); text-shadow:0 0 10px rgba(52,208,88,1),0 0 24px rgba(52,208,88,.6);}100%{filter:brightness(1); text-shadow:0 0 4px rgba(52,208,88,.7),0 0 12px rgba(52,208,88,.35);}}
  .footer-copy{color:#bbb; font-size:.8rem; letter-spacing:.75px;}
  @media (max-width:576px){
  .social-link{font-size:1.7rem;}
    .footer-dev{font-size:.85rem;}
    .footer-copy{font-size:.72rem;}
  }
</style>
{% endblock %}


