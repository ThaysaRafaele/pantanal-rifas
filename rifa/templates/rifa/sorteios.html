{% extends "base.html" %}

{% block title %}Sorteios - Rifa Online{% endblock %}

{% block content %}
<div class="container-fluid px-0">
  <div class="bg-white rounded-4 shadow p-4 mb-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="mb-0 text-primary"><i class="fas fa-bolt"></i> Sorteios em Destaque</h2>
      {% if user.is_staff %}
        <a href="/admin/rifa/rifa/add/" class="btn btn-outline-primary"><i class="fas fa-plus"></i> Nova Rifa</a>
      {% endif %}
    </div>
    <ul class="nav nav-pills mb-4">
      <li class="nav-item"><a class="nav-link active" href="#">Ativos</a></li>
      <li class="nav-item"><a class="nav-link" href="#">Concluídos</a></li>
      <li class="nav-item"><a class="nav-link" href="#">Em breve</a></li>
    </ul>
    <div class="row g-4">
      {% for rifa in rifas %}
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card h-100 border-0 shadow-sm rounded-4">
          {% if rifa.imagem %}
            <img src="{{ rifa.imagem.url }}" class="card-img-top rounded-top-4" alt="{{ rifa.titulo }}" style="height: 180px; object-fit: cover;">
          {% else %}
            <img src="https://via.placeholder.com/350x180?text=Sem+Imagem" class="card-img-top rounded-top-4" alt="Sem imagem" style="height: 180px; object-fit: cover;">
          {% endif %}
          <div class="card-body d-flex flex-column">
            <h5 class="card-title text-dark">{{ rifa.titulo }}</h5>
            <p class="card-text text-muted mb-2">{{ rifa.descricao|truncatewords:20 }}</p>
            <div class="mb-2">
              <span class="badge bg-success fs-6">R$ {{ rifa.preco }}</span>
            </div>
            {% if rifa.encerrada %}
              <a href="#" class="btn btn-secondary w-100 mt-2 disabled" tabindex="-1" aria-disabled="true">
                <i class="fas fa-ticket-alt"></i> Bilhete Indisponível
              </a>
            {% else %}
              <a href="{% url 'sorteio_detail' rifa.id %}" class="btn btn-primary w-100 mt-2">
                <i class="fas fa-ticket-alt"></i> Adquirir Bilhete
              </a>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12">
        <div class="alert alert-warning text-center">Nenhum sorteio disponível no momento.</div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
<style>
  .card-img-top { box-shadow: 0 4px 16px rgba(0,0,0,0.08); }
  .card { transition: transform 0.2s; }
  .card:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 32px rgba(0,0,0,0.12); }
</style>
{% endblock %}
